# 관리자 권한 가이드

## 관리자 시스템 개요

이 애플리케이션은 관리자 권한 시스템을 제공합니다. 관리자는 다음 작업을 수행할 수 있습니다:

- 모든 가입자 목록 보기
- 가입자 정보 확인 (이메일, 이름, 전화번호, 생년월일, 가입일)
- 일반 회원을 관리자로 승격
- 관리자 권한 제거
- 사용자 삭제

## 첫 번째 관리자 설정하기

### 방법 1: 스크립트 사용 (권장)

1. 먼저 회원가입을 통해 계정을 만듭니다.

2. 터미널에서 다음 명령어를 실행합니다:

```bash
python3 make_admin.py <이메일>
```

예시:
```bash
python3 make_admin.py admin@example.com
```

3. 성공 메시지를 확인합니다:
```
✅ 사용자 '홍길동' (admin@example.com)가 관리자로 승격되었습니다!
```

### 방법 2: 직접 데이터베이스 수정

```bash
python3 -c "
import sqlite3
conn = sqlite3.connect('users.db')
conn.execute('UPDATE users SET is_admin = 1 WHERE email = \"admin@example.com\"')
conn.commit()
conn.close()
print('관리자 권한이 부여되었습니다.')
"
```

## 관리자 대시보드 접근

1. 관리자 권한이 있는 계정으로 로그인합니다.

2. 브라우저에서 다음 URL로 이동합니다:
```
http://localhost:5000/admin
```

3. 관리자 대시보드에서 다음을 확인할 수 있습니다:
   - 전체 가입자 수
   - 관리자 수
   - 일반 회원 수
   - 가입자 상세 목록

## 관리자 기능

### 1. 사용자 권한 관리

- **관리자 승격**: 일반 회원을 관리자로 만들기
  - 가입자 목록에서 "관리자 승격" 버튼 클릭

- **권한 제거**: 관리자를 일반 회원으로 변경
  - 가입자 목록에서 "권한 제거" 버튼 클릭
  - ⚠️ 자신의 권한은 제거할 수 없습니다

### 2. 사용자 삭제

- 가입자 목록에서 "삭제" 버튼 클릭
- 확인 대화상자에서 확인
- ⚠️ 자신의 계정은 삭제할 수 없습니다

## 권한 체계

### 비회원/무료회원
- `/sermon` 페이지만 접근 가능
- 회원가입 및 로그인 가능

### 일반 회원 (로그인 필요)
- 홈 페이지 (`/`)
- Bible, Message, Drama 페이지
- 프로필 페이지
- Sermon 페이지

### 관리자 (로그인 + 관리자 권한 필요)
- 일반 회원의 모든 권한
- 관리자 대시보드 (`/admin`)
- 가입자 관리 기능
- 권한 부여/제거 기능

## 보안 주의사항

1. **관리자 권한 신중하게 부여**
   - 관리자는 모든 사용자의 정보를 볼 수 있습니다
   - 관리자는 다른 사용자를 삭제할 수 있습니다

2. **최소 권한 원칙**
   - 필요한 사람에게만 관리자 권한을 부여하세요
   - 정기적으로 관리자 목록을 검토하세요

3. **자신의 계정 보호**
   - 시스템은 자신의 관리자 권한을 제거하지 못하도록 방지합니다
   - 최소 1명의 관리자는 항상 유지되어야 합니다

## 문제 해결

### Q: 관리자 대시보드에 접근할 수 없어요
A: 다음을 확인하세요:
- 로그인이 되어 있는지
- 해당 계정이 관리자 권한을 가지고 있는지 (`make_admin.py`로 확인)

### Q: 모든 관리자가 삭제되었어요
A: `make_admin.py` 스크립트를 사용하여 새로운 관리자를 만드세요.

### Q: 가입자 목록이 비어 있어요
A: 아직 회원가입한 사용자가 없습니다. 먼저 회원가입을 진행하세요.
