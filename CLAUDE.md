# Drama Page ì¬êµ¬ì¶• í”„ë¡œì íŠ¸

## í˜„ì¬ ë¸Œëœì¹˜
`claude/continue-drama-session-01UA73Rm8DTaYNdoLjaZGFiA`

## í”„ë¡œì íŠ¸ ê°œìš”
Drama Lab - AI ê¸°ë°˜ ë“œë¼ë§ˆ ì˜ìƒ ìë™ ìƒì„± ì‹œìŠ¤í…œ

## ì‘ì—… ì§„í–‰ ìƒí™©

### ì™„ë£Œëœ ì‘ì—… (ë°±ì—”ë“œ íŒŒì´í”„ë¼ì¸)
- [x] Step1: ê³µì‹ ìŠ¤í™ í™•ì • - ìŠ¤í‚¤ë§ˆ ë° í”„ë¡¬í”„íŠ¸
- [x] Step2: ì´ë¯¸ì§€ ìƒì„± ìŠ¤í™ ë° ë¼ˆëŒ€ ì½”ë“œ
- [x] Step3: TTS & ìë§‰ ìƒì„± ëª¨ë“ˆ êµ¬ì¶•
- [x] Step4: ì˜ìƒ ì¡°ë¦½ ëª¨ë“ˆ êµ¬ì¶•
- [x] Step5: YouTube ì—…ë¡œë“œ ìë™í™” ëª¨ë“ˆ êµ¬ì¶•
- [x] ì „ì²´ íŒŒì´í”„ë¼ì¸ í†µí•© ì»¨íŠ¸ë¡¤ëŸ¬ êµ¬í˜„

### ì™„ë£Œëœ ì‘ì—… (í”„ë¡ íŠ¸ì—”ë“œ UI) - 2024-11-29
- [x] drama.html - ì „ì²´ 5ìŠ¤í… UI ì™„ì„±
- [x] drama-main.js - ë©”ì¸ ëª¨ë“ˆ (ìŠ¤í… ì „í™˜, ì„¸ì…˜ ê´€ë¦¬)
- [x] drama-step1.js - ëŒ€ë³¸ ìƒì„± ëª¨ë“ˆ
- [x] drama-step2.js - ì´ë¯¸ì§€ ìƒì„± ëª¨ë“ˆ (ìºë¦­í„°/ì”¬ ë¶„ì„)
- [x] drama-step3.js - TTS ìŒì„±í•©ì„± ëª¨ë“ˆ
- [x] drama-step4.js - ì˜ìƒ ì œì‘ ëª¨ë“ˆ
- [x] drama-step5.js - YouTube ì—…ë¡œë“œ ëª¨ë“ˆ
- [x] drama-session.js - ì„¸ì…˜ ë° Q&A ê¸°ë¡ ê´€ë¦¬
- [x] drama-utils.js - ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
- [x] drama.css - ì „ì²´ ìŠ¤íƒ€ì¼ ì™„ì„± (character-card, scene-card ìŠ¤íƒ€ì¼ í¬í•¨)

## íŒŒì¼ êµ¬ì¡°

### ë°±ì—”ë“œ
- `drama_server.py` (6241ì¤„) - ë©”ì¸ ì„œë²„, ëª¨ë“  API ì—”ë“œí¬ì¸íŠ¸ í¬í•¨

### í”„ë¡ íŠ¸ì—”ë“œ (ì™„ì„±ë¨)
- `templates/drama.html` - ë©”ì¸ í…œí”Œë¦¿ (5ìŠ¤í… UI)
- `static/css/drama.css` - ìŠ¤íƒ€ì¼ì‹œíŠ¸ (1100ì¤„+)
- `static/js/drama-main.js` - ë©”ì¸ ëª¨ë“ˆ (348ì¤„)
- `static/js/drama-step1.js` - ëŒ€ë³¸ ìƒì„± (275ì¤„)
- `static/js/drama-step2.js` - ì´ë¯¸ì§€ ìƒì„± (332ì¤„)
- `static/js/drama-step3.js` - TTS ìŒì„±í•©ì„± (289ì¤„)
- `static/js/drama-step4.js` - ì˜ìƒ ì œì‘ (275ì¤„)
- `static/js/drama-step5.js` - YouTube ì—…ë¡œë“œ (379ì¤„)
- `static/js/drama-utils.js` - ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ (194ì¤„)
- `static/js/drama-session.js` - ì„¸ì…˜ ê´€ë¦¬ (250ì¤„)

### ê°€ì´ë“œ/ì„¤ì •
- `guides/drama.json` - ë“œë¼ë§ˆ ì„¤ì •
- `guides/nostalgia-drama-prompts.json` - í–¥ìˆ˜ ë“œë¼ë§ˆ í”„ë¡¬í”„íŠ¸
- `guides/nostalgia-drama-sample.json` - ìƒ˜í”Œ ë°ì´í„°
- `guides/korean-senior-image-prompts.json` - **í•œêµ­ì¸ ì‹œë‹ˆì–´ ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ ê°€ì´ë“œ (NEW)**

## ì•Œë ¤ì§„ ì´ìŠˆ (drama_issue_code.md ì°¸ì¡°)

### 1. ~~TTS ìŒì„± ìƒì„± ì˜¤ë¥˜~~ âœ… í•´ê²°ë¨ (2024-11-29)
- ~~Google TTS API 5000ë°”ì´íŠ¸ ì œí•œ ì´ˆê³¼ ë¬¸ì œ~~
- **í•´ê²°ì±…**: ìƒˆ TTS íŒŒì´í”„ë¼ì¸ êµ¬í˜„
  - `tts_chunking.py`: ë¬¸ì¥ ë‹¨ìœ„ ë¶„ë¦¬ + ë°”ì´íŠ¸ ì œí•œ ì²­í‚¹
  - `tts_service.py`: ì²­í¬ë³„ TTS + FFmpeg ë³‘í•© + SRT ìë§‰ ìƒì„±
  - ìƒˆ API: `POST /api/drama/step3/tts`

### 2. ~~í•œêµ­ì¸ ì´ë¯¸ì§€ ìƒì„± ë¬¸ì œ~~ âœ… ê°œì„ ë¨ (2024-11-29)
- ~~í•œêµ­ í• ë¨¸ë‹ˆ/í• ì•„ë²„ì§€ ìƒì„± ì‹œ ì™¸êµ­ì¸ ì´ë¯¸ì§€ ì¶œë ¥~~
- **í•´ê²°ì±…**: ìƒì„¸í•œ í•œêµ­ì¸ ì‹œë‹ˆì–´ í”„ë¡¬í”„íŠ¸ ê°€ì´ë“œ ì¶”ê°€
  - `guides/korean-senior-image-prompts.json`: í•œêµ­ì¸ ì‹œë‹ˆì–´ ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ ê°€ì´ë“œ
  - í• ë¨¸ë‹ˆ(halmeoni)/í• ì•„ë²„ì§€(harabeoji) ë³„ë„ í”„ë¡¬í”„íŠ¸ ì •ì˜
  - í•œêµ­ì¸ ì–¼êµ´ íŠ¹ì§• ìƒì„¸ ëª…ì‹œ: ë‘¥ê·¼ ì–¼êµ´, í™‘êº¼í’€/ì†ìŒêº¼í’€, í•œêµ­ì¸ í”¼ë¶€í†¤
  - 1970~80ë…„ëŒ€ ë¹ˆí‹°ì§€ í•„ë¦„ ìŠ¤íƒ€ì¼ ì ìš©: film grain, faded warm colors

### 3. ~~Step2 ìºë¦­í„° ì¼ê´€ì„± ë¬¸ì œ~~ âœ… í•´ê²°ë¨ (2024-11-29)
- ~~ì£¼ì¸ê³µ ì¹´ë“œì™€ ì”¬ ì´ë¯¸ì§€ì˜ ì¸ë¬¼ì´ ë¶„ë¦¬ë¨~~
- **í•´ê²°ì±…**: ì”¬ í”„ë¡¬í”„íŠ¸ì— main_character ì •ë³´ ê°•ì œ í¬í•¨
  - `drama-step2.js`: `buildCharacterConsistencyPrompt()` í•¨ìˆ˜ ì¶”ê°€
  - ì”¬ ì´ë¯¸ì§€ ìƒì„± ì‹œ ì£¼ì¸ê³µ ì •ë³´ë¥¼ í”„ë¡¬í”„íŠ¸ ë§¨ ì•ì— ë°°ì¹˜
  - í•œêµ­ì¸ í• ë¨¸ë‹ˆ/í• ì•„ë²„ì§€ ì „ìš© ì¼ê´€ì„± í”„ë¡¬í”„íŠ¸ ì ìš©

### 4. ~~Step3 TTS ì„¤ëª…ë¬¸ ì½ê¸° ë¬¸ì œ~~ âœ… í•´ê²°ë¨ (2024-11-29)
- ~~TTSê°€ "1. ì£¼ì¸ê³µ ì„¤ì • â€“ ì´ë¦„: ì´ìˆœì..." ê°™ì€ ë©”íƒ€ ì„¤ëª…ì„ ì½ìŒ~~
- **í•´ê²°ì±…**: ìˆœìˆ˜ ë‚˜ë ˆì´ì…˜ë§Œ ì¶”ì¶œí•˜ë„ë¡ ìˆ˜ì •
  - `drama-step3.js`: `getScriptTexts()` í•¨ìˆ˜ ê°œì„ 
  - ë©”íƒ€ ì„¤ëª… íŒ¨í„´ í•„í„°ë§ ì¶”ê°€ (ì£¼ì¸ê³µ ì„¤ì •, ìŠ¤í† ë¦¬ ì»¨ì…‰, ë°°ê²½ ë“±)
  - `extractNarrationFromScene()` í•¨ìˆ˜ë¡œ ìˆœìˆ˜ ë‚˜ë ˆì´ì…˜ë§Œ ì¶”ì¶œ

### 5. ~~Step4 500 ì—ëŸ¬~~ âœ… ë””ë²„ê¹… ê°•í™” (2024-11-29)
- ~~`/api/drama/generate-video` 500 ì—ëŸ¬ ë°œìƒ~~
- **í•´ê²°ì±…**: ìƒì„¸ ë””ë²„ê¹… ë¡œê·¸ ì¶”ê°€
  - ìš”ì²­ ë°ì´í„° êµ¬ì¡° ì¶œë ¥
  - cuts ë°°ì—´ ìƒì„¸ ì •ë³´ ì¶œë ¥
  - traceback ì¶œë ¥ ì¶”ê°€

### 6. ~~Step4 ì˜ìƒ ìƒì„± íƒ€ì„ì•„ì›ƒ~~ âœ… ë³‘ë ¬ ì²˜ë¦¬ë¡œ í•´ê²° (2024-12-01)
- ~~ì”¬ë³„ ìˆœì°¨ ì²˜ë¦¬ë¡œ 300ì´ˆ íƒ€ì„ì•„ì›ƒ ë°œìƒ~~
- **í•´ê²°ì±…**: ThreadPoolExecutorë¥¼ ì‚¬ìš©í•œ ë³‘ë ¬ ì²˜ë¦¬ ë„ì…
  - `_create_scene_clip()`: ê°œë³„ ì”¬ í´ë¦½ ìƒì„± í•¨ìˆ˜ ë¶„ë¦¬
  - `_generate_video_with_cuts()`: ë³‘ë ¬ ì²˜ë¦¬ ì ìš©
  - ìµœëŒ€ 4ê°œ ì›Œì»¤ë¡œ ì”¬ í´ë¦½ ë™ì‹œ ìƒì„±
  - ëª¨ë“  í´ë¦½ ìƒì„± í›„ ìˆœì„œëŒ€ë¡œ concat ë³‘í•©
  - ì˜ˆìƒ ì†ë„ í–¥ìƒ: 4ë°° (10ê°œ ì”¬ ê¸°ì¤€)

## ì£¼ìš” API ì—”ë“œí¬ì¸íŠ¸ (drama_server.py)
- `/api/drama/gpt-plan-step1` - ëŒ€ë³¸ ìƒì„±
- `/api/drama/analyze-script` - **AI ëŒ€ë³¸ ë¶„ì„ (ì”¬/ìƒ· ìë™ ë¶„ë¦¬) (NEW)**
- `/api/drama/analyze-characters` - ìºë¦­í„°/ì”¬ ë¶„ì„
- `/api/drama/generate-image` - ì´ë¯¸ì§€ ìƒì„±
- `/api/drama/generate-tts` - TTS ìŒì„± ìƒì„± (ê¸°ì¡´)
- `/api/drama/step3/tts` - **ìƒˆ TTS íŒŒì´í”„ë¼ì¸ (5000ë°”ì´íŠ¸ ì œí•œ í•´ê²° + SRT ìë§‰)**
- `/api/drama/generate-scene-clips-zip` - **ì”¬ë³„ MP4 í´ë¦½ ZIP ìƒì„± (NEW)**
- `/api/drama/generate-video` - ì˜ìƒ ì œì‘ (ë ˆê±°ì‹œ)
- `/api/drama/video-status/{jobId}` - ì˜ìƒ ì‘ì—… ìƒíƒœ í™•ì¸
- `/api/youtube/auth-status` - YouTube ì¸ì¦ ìƒíƒœ
- `/api/youtube/upload` - YouTube ì—…ë¡œë“œ

## ë‹¤ìŒ ì„¸ì…˜ì—ì„œ í•  ì¼
1. ~~drama.html UI ì™„ì„±~~ âœ… ì™„ë£Œ
2. ~~ê° stepë³„ JS ëª¨ë“ˆ êµ¬í˜„~~ âœ… ì™„ë£Œ
3. ~~TTS 5000ë°”ì´íŠ¸ ì œí•œ í•´ê²°~~ âœ… ì™„ë£Œ
4. ~~ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ íŠœë‹ - í•œêµ­ì¸/70-80ë…„ëŒ€ ê°ë„~~ âœ… ì™„ë£Œ
5. ~~ì‹¤ì œ ë™ì‘ í…ŒìŠ¤íŠ¸~~ âœ… ì™„ë£Œ (2024-12-01)
6. ~~ì „ì²´ íŒŒì´í”„ë¼ì¸ í†µí•© í…ŒìŠ¤íŠ¸~~ âœ… ì™„ë£Œ - YouTube ì—…ë¡œë“œ ì„±ê³µ!

## ğŸ‰ í”„ë¡œì íŠ¸ ì™„ë£Œ (2024-12-01)
- ì „ì²´ 5ìŠ¤í… íŒŒì´í”„ë¼ì¸ ì •ìƒ ë™ì‘ í™•ì¸
- Step1(ëŒ€ë³¸) â†’ Step2(ì´ë¯¸ì§€) â†’ Step3(TTS) â†’ Step4(ì˜ìƒ) â†’ Step5(YouTube ì—…ë¡œë“œ) ì™„ì£¼

## ğŸ†• AI ëŒ€ë³¸ ë¶„ì„ ëª¨ë“œ (2024-12-01)
- Step1 UI ëŒ€í­ ë³€ê²½: ì „ì²´ ëŒ€ë³¸ 1ê°œ ì…ë ¥ì°½ + AI ë¶„ì„ ë²„íŠ¼
- `/api/drama/analyze-script` API ì¶”ê°€ (GPT-4o-mini ì‚¬ìš©)
  - ì „ì²´ ëŒ€ë³¸ â†’ ì”¬(Scene) + ìƒ·(Shot) ìë™ ë¶„ë¦¬
  - ê° ìƒ·ë³„ ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸(ì˜ë¬¸) + ë‚˜ë ˆì´ì…˜(í•œê¸€) ìƒì„±
  - ì¸ë„¤ì¼ í…ìŠ¤íŠ¸ ì œì•ˆ ê¸°ëŠ¥ í¬í•¨
- ì”¬/ìƒ· íŠ¸ë¦¬ êµ¬ì¡° UI
  - ì”¬ë³„ ì ‘ê¸°/í¼ì¹˜ê¸° í† ê¸€
  - ê° ìƒ·ì˜ í”„ë¡¬í”„íŠ¸/ë‚˜ë ˆì´ì…˜ ìˆ˜ì • ê°€ëŠ¥
- Step2 ë‹¤ì¤‘ ìƒ· ì´ë¯¸ì§€ ìƒì„± ì§€ì›
  - í”Œë«í•œ ìƒ· ë°°ì—´ë¡œ ì´ë¯¸ì§€ ìƒì„±
  - ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒìœ¼ë¡œ ë§ì€ ìƒ· í‘œì‹œ
- Step3 AI ë¶„ì„ ëª¨ë“œ ë‚˜ë ˆì´ì…˜ ì¶”ì¶œ ì§€ì›

## ğŸ†• ì”¬ë³„ í´ë¦½ ë‹¤ìš´ë¡œë“œ (2024-12-01)
- Step4 ë³€ê²½: ì „ì²´ ì˜ìƒ ìƒì„± â†’ ì”¬ë³„ MP4 í´ë¦½ ë‹¤ìš´ë¡œë“œ
- `/api/drama/generate-scene-clips-zip` API ì¶”ê°€
  - ê° ì”¬(ì´ë¯¸ì§€+ì˜¤ë””ì˜¤)ë¥¼ ê°œë³„ MP4ë¡œ ìƒì„±
  - ZIP íŒŒì¼ë¡œ ë¬¶ì–´ ë‹¤ìš´ë¡œë“œ
- CapCut ë“± ì™¸ë¶€ í¸ì§‘ê¸°ì—ì„œ ììœ ë¡­ê²Œ í¸ì§‘ ê°€ëŠ¥

## ğŸ†• TTS ìŒì„± ì„ íƒ UI (2024-12-01)
- 6ê°œ ìŒì„± ì¹´ë“œ UI (ì—¬ì„± 3ê°œ, ë‚¨ì„± 3ê°œ)
- Neural2 ìŒì„± ê¸°ë³¸ ì„ íƒ (ìµœê³  í’ˆì§ˆ)
- ë¯¸ë¦¬ë“£ê¸° ë²„íŠ¼ìœ¼ë¡œ ìŒì„± í™•ì¸ ê°€ëŠ¥
- ìŒì„± ëª©ë¡:
  - ì—¬ì„±: Neural2-A (ì°¨ë¶„), Neural2-B (ë°ì€), Wavenet-A (í‘œì¤€)
  - ë‚¨ì„±: Neural2-C (ì¤‘í›„), Wavenet-C (í‘œì¤€), Wavenet-D (ì Šì€)

## ì•Œë ¤ì§„ ì´ìŠˆ (ì§„í–‰ ì¤‘)
- ~~ì˜ìƒì— ì†Œë¦¬/ìë§‰ ëˆ„ë½ ë¬¸ì œ~~ â†’ ì”¬ë³„ í´ë¦½ ë‹¤ìš´ë¡œë“œë¡œ ì „í™˜

## ë‹¤ìŒ ì‘ì—…
- [ ] ì¸ë„¤ì¼ ìƒì„± ê¸°ëŠ¥ ì¶”ê°€
  - AI ë¶„ì„ì—ì„œ ì¸ë„¤ì¼ ì œì•ˆ ë°ì´í„°ëŠ” ì´ë¯¸ ìƒì„±ë¨
  - ì´ë¯¸ì§€ ìƒì„± APIë¡œ ì¸ë„¤ì¼ ì´ë¯¸ì§€ ìë™ ìƒì„± êµ¬í˜„ í•„ìš”

## í˜¸ìŠ¤íŒ… í™˜ê²½
- **Render Standard í”Œëœ** (ë¬´ë£Œ ì•„ë‹˜!)
  - ë©”ëª¨ë¦¬: 2GB
  - CPU: 1 vCPU
  - ìš”ì²­ íƒ€ì„ì•„ì›ƒ: ì¶©ë¶„í•¨
- URL: https://drama-s2ns.onrender.com
- ì˜ìƒ ì—…ë¡œë“œ ìš©ëŸ‰: 14MB (8ë¶„ ì˜ìƒ) ì •ë„ëŠ” ë¬¸ì œì—†ìŒ

## ì°¸ê³  ì‚¬í•­
- ì´ë¯¸ì§€ ìƒì„±: Gemini (ê¸°ë³¸) / FLUX.1 Pro / DALL-E 3 ì§€ì›
- TTS: Google Cloud TTS (ê¸°ë³¸) / ë„¤ì´ë²„ í´ë¡œë°” ì§€ì›
- ë°±ì—”ë“œ/í”„ë¡ íŠ¸ì—”ë“œ íŒŒì´í”„ë¼ì¸ ëª¨ë‘ ì™„ì„± ìƒíƒœ
- ì‹¤í–‰ì„ ìœ„í•´ í•„ìš”í•œ í™˜ê²½ ë³€ìˆ˜: OPENAI_API_KEY, GOOGLE_API_KEY ë“±

---

## âš ï¸ GPT-5.1 API ì‚¬ìš© ê°€ì´ë“œ (ì¤‘ìš”!)

GPT-5.1ì€ ê¸°ì¡´ Chat Completions APIê°€ ì•„ë‹Œ **Responses API**ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

### âŒ ì˜ëª»ëœ ë°©ì‹ (Chat Completions API - ì‘ë™ ì•ˆí•¨)
```python
from openai import OpenAI
client = OpenAI()

response = client.chat.completions.create(
    model="gpt-5.1",  # ì´ ë°©ì‹ì€ ì•ˆë¨!
    messages=[
        {"role": "system", "content": "..."},
        {"role": "user", "content": "..."}
    ]
)
result = response.choices[0].message.content
```

### âœ… ì˜¬ë°”ë¥¸ ë°©ì‹ (Responses API)
```python
from openai import OpenAI
client = OpenAI()

response = client.responses.create(
    model="gpt-5.1",
    input=[
        {
            "role": "system",
            "content": [
                {
                    "type": "input_text",
                    "text": "ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸"
                }
            ]
        },
        {
            "role": "user",
            "content": [
                {
                    "type": "input_text",
                    "text": "ì‚¬ìš©ì í”„ë¡¬í”„íŠ¸"
                }
            ]
        }
    ],
    temperature=0.7
)

# ê²°ê³¼ ì¶”ì¶œ
if getattr(response, "output_text", None):
    result = response.output_text.strip()
else:
    text_chunks = []
    for item in getattr(response, "output", []) or []:
        for content in getattr(item, "content", []) or []:
            if getattr(content, "type", "") == "text":
                text_chunks.append(getattr(content, "text", ""))
    result = "\n".join(text_chunks).strip()
```

### ì°¸ê³  ì˜ˆì‹œ ì½”ë“œ
- `drama_server.py` ë‚´ `/api/drama/gpt-pro` ì—”ë“œí¬ì¸íŠ¸ (ì•½ 1740ì¤„)
- `drama_server.py` ë‚´ `/api/image/analyze-script` ì—”ë“œí¬ì¸íŠ¸ (ì•½ 9760ì¤„)

### GPT-5.1 ëª¨ë¸ ì¢…ë¥˜
- `gpt-5.1` - ê¸°ë³¸ ëª¨ë¸ (Thinking ëª¨ë“œ)
- `gpt-5.1-chat-latest` - Instant ëª¨ë“œ
- `gpt-5.1-codex` - ì½”ë”© íŠ¹í™” (400K ì»¨í…ìŠ¤íŠ¸)
- `gpt-5.1-codex-mini` - ì½”ë”© íŠ¹í™” ê²½ëŸ‰ ë²„ì „

### JSON ì‘ë‹µ ë°›ê¸°
Responses APIëŠ” `response_format={"type": "json_object"}` ì˜µì…˜ì„ ì§€ì›í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ëŒ€ì‹  í”„ë¡¬í”„íŠ¸ì— "ë°˜ë“œì‹œ JSON í˜•ì‹ìœ¼ë¡œë§Œ ì‘ë‹µí•˜ì„¸ìš”"ë¥¼ ì¶”ê°€í•˜ê³ , ì‘ë‹µì—ì„œ ë§ˆí¬ë‹¤ìš´ ì½”ë“œë¸”ë¡ì„ ì œê±° í›„ íŒŒì‹±í•˜ì„¸ìš”.

```python
# JSON íŒŒì‹± (ë§ˆí¬ë‹¤ìš´ ì½”ë“œë¸”ë¡ ì œê±°)
if result_text.startswith("```"):
    result_text = result_text.split("```")[1]
    if result_text.startswith("json"):
        result_text = result_text[4:]
result_text = result_text.strip()
result = json.loads(result_text)
```
