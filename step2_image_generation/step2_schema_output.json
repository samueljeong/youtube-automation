{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Step2 Image Generation Output Schema",
  "description": "이미지 프롬프트 생성 결과 (썸네일 1장 + 본문용 최대 4컷)",
  "type": "object",
  "required": ["step", "category", "title", "thumbnail", "cuts"],
  "properties": {
    "step": {
      "type": "string",
      "const": "step2_images_result",
      "description": "단계 식별자"
    },
    "category": {
      "type": "string",
      "description": "카테고리"
    },
    "title": {
      "type": "string",
      "description": "에피소드 제목"
    },
    "thumbnail": {
      "type": "object",
      "required": ["prompt", "text"],
      "properties": {
        "prompt": {
          "type": "string",
          "description": "썸네일 이미지 생성용 영어 프롬프트"
        },
        "text": {
          "type": "string",
          "description": "썸네일에 들어갈 텍스트"
        },
        "image_path": {
          "type": ["string", "null"],
          "description": "생성된 썸네일 이미지 경로 (아직 생성 안 됐으면 null)"
        }
      }
    },
    "cuts": {
      "type": "array",
      "description": "본문용 이미지 컷 목록",
      "items": {
        "type": "object",
        "required": ["cut_id", "scene_id", "prompt"],
        "properties": {
          "cut_id": {
            "type": "integer",
            "description": "컷 번호 (1부터 시작)"
          },
          "scene_id": {
            "type": "string",
            "description": "연결된 씬 ID"
          },
          "prompt": {
            "type": "string",
            "description": "이미지 생성용 영어 프롬프트"
          },
          "image_path": {
            "type": ["string", "null"],
            "description": "생성된 이미지 경로 (아직 생성 안 됐으면 null)"
          }
        }
      }
    }
  }
}
