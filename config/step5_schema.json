{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Step5 YouTube Upload Schema",
  "description": "Step5 YouTube 업로드 자동화 - YouTube Data API v3",
  "version": "1.0.0",

  "input": {
    "description": "Step4 결과 + Step1 메타데이터를 조합한 업로드 입력",
    "type": "object",
    "required": ["step", "category", "title", "video_filename", "upload_mode"],
    "properties": {
      "step": {"type": "string", "const": "step5_youtube_upload"},
      "category": {"type": "string"},
      "title": {"type": "string", "minLength": 1},
      "description_seed": {"type": "string"},
      "tags_seed": {"type": "array", "items": {"type": "string"}},
      "video_filename": {"type": "string"},
      "upload_mode": {"type": "string", "enum": ["immediate", "scheduled"]},
      "preferred_slot": {"type": "string", "pattern": "^([01]?[0-9]|2[0-3]):[0-5][0-9]$"},
      "timezone": {"type": "string", "default": "Asia/Seoul"}
    }
  },

  "output": {
    "description": "YouTube 업로드 결과",
    "type": "object",
    "required": ["step", "status", "channel_id"],
    "properties": {
      "step": {"type": "string", "const": "step5_youtube_upload_result"},
      "status": {"type": "string", "enum": ["scheduled", "uploaded", "error"]},
      "channel_id": {"type": "string"},
      "video_id": {"type": ["string", "null"]},
      "scheduled_time": {"type": ["string", "null"], "format": "date-time"},
      "url": {"type": ["string", "null"]},
      "error_message": {"type": ["string", "null"]}
    }
  }
}
