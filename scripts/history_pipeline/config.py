"""
한국사 자동화 파이프라인 설정

시대 흐름형 시리즈를 위한 설정 파일
- 고조선부터 대한제국까지 시대별 트랙 정의
- 각 시대별 수집 키워드 관리
- 시트 구조 및 제한 설정
"""

from typing import Dict, List, Any


# ============================================================
# 시대 트랙 설정 (순서 고정)
# ============================================================

# 시대 순서 (영문 키 사용)
ERA_ORDER: List[str] = [
    "GOJOSEON",      # 고조선
    "BUYEO",         # 부여/옥저/동예
    "SAMGUK",        # 삼국시대
    "NAMBUK",        # 남북국시대
    "GORYEO",        # 고려
    "JOSEON_EARLY",  # 조선 전기
    "JOSEON_LATE",   # 조선 후기
    "DAEHAN",        # 대한제국
]

# 시대 메타데이터
ERAS: Dict[str, Dict[str, Any]] = {
    "GOJOSEON": {
        "name": "고조선",
        "name_en": "Gojoseon",
        "period": "BC 2333 ~ BC 108",
        "description": "한반도 최초의 국가, 단군조선과 위만조선",
        "active": True,
    },
    "BUYEO": {
        "name": "부여/옥저/동예",
        "name_en": "Buyeo Period",
        "period": "BC 2세기 ~ AD 494",
        "description": "고조선 멸망 후 등장한 여러 나라",
        "active": True,
    },
    "SAMGUK": {
        "name": "삼국시대",
        "name_en": "Three Kingdoms",
        "period": "BC 57 ~ AD 668",
        "description": "고구려, 백제, 신라의 경쟁과 발전",
        "active": True,
    },
    "NAMBUK": {
        "name": "남북국시대",
        "name_en": "North-South States",
        "period": "AD 698 ~ AD 926",
        "description": "통일신라와 발해의 병존",
        "active": True,
    },
    "GORYEO": {
        "name": "고려",
        "name_en": "Goryeo Dynasty",
        "period": "AD 918 ~ AD 1392",
        "description": "왕건의 건국부터 조선 건국까지",
        "active": True,
    },
    "JOSEON_EARLY": {
        "name": "조선 전기",
        "name_en": "Early Joseon",
        "period": "AD 1392 ~ AD 1592",
        "description": "조선 건국부터 임진왜란 이전",
        "active": True,
    },
    "JOSEON_LATE": {
        "name": "조선 후기",
        "name_en": "Late Joseon",
        "period": "AD 1592 ~ AD 1897",
        "description": "임진왜란 이후부터 대한제국 선포 이전",
        "active": True,
    },
    "DAEHAN": {
        "name": "대한제국",
        "name_en": "Korean Empire",
        "period": "AD 1897 ~ AD 1910",
        "description": "근대화 시도와 국권 상실",
        "active": True,
    },
}


# ============================================================
# 시대별 수집 키워드
# ============================================================

ERA_KEYWORDS: Dict[str, Dict[str, List[str]]] = {
    "GOJOSEON": {
        "primary": [
            "고조선", "단군", "단군왕검", "아사달", "위만조선", "위만",
            "기자조선", "조선", "요동", "왕검성", "고조선 멸망",
        ],
        "secondary": [
            "청동기", "비파형동검", "고인돌", "미송리식토기",
            "한사군", "낙랑군", "8조법", "팔조법금",
        ],
        "exclude": [
            "북한", "김정은", "조선일보", "조선시대",  # 현대 조선 관련 제외
        ],
    },
    "BUYEO": {
        "primary": [
            "부여", "동부여", "북부여", "옥저", "동예", "삼한",
            "마한", "진한", "변한", "예맥", "영고", "동맹", "무천",
        ],
        "secondary": [
            "철기문화", "순장", "형사취수", "1책12법", "제천행사",
            "소도", "천군", "별읍",
        ],
        "exclude": [],
    },
    "SAMGUK": {
        "primary": [
            "고구려", "백제", "신라", "가야", "삼국시대",
            "광개토대왕", "장수왕", "근초고왕", "진흥왕", "법흥왕",
            "을지문덕", "살수대첩", "계백", "김유신", "연개소문",
        ],
        "secondary": [
            "불교 수용", "삼국사기", "삼국유사", "고분벽화",
            "첨성대", "황룡사", "무령왕릉", "호우명그릇",
            "나제동맹", "삼국통일", "당나라",
        ],
        "exclude": [],
    },
    "NAMBUK": {
        "primary": [
            "통일신라", "발해", "남북국", "대조영", "무왕", "문왕",
            "원성왕", "신문왕", "경덕왕", "해동성국",
        ],
        "secondary": [
            "9주5소경", "골품제", "선종", "화엄종", "석굴암", "불국사",
            "장보고", "청해진", "호족", "6두품", "정혜쌍수",
        ],
        "exclude": [],
    },
    "GORYEO": {
        "primary": [
            "고려", "왕건", "광종", "성종", "현종", "문종",
            "공민왕", "무신정권", "최충헌", "삼별초",
            "몽골침입", "원간섭기", "권문세족",
        ],
        "secondary": [
            "과거제도", "팔만대장경", "직지심체요절", "고려청자",
            "상감청자", "개경", "벽란도", "대몽항쟁",
            "삼국사기", "삼국유사", "묘청의 난",
        ],
        "exclude": [],
    },
    "JOSEON_EARLY": {
        "primary": [
            "조선 건국", "이성계", "태조", "태종", "세종대왕",
            "세조", "성종", "연산군", "중종", "명종",
            "훈민정음", "집현전", "경국대전",
        ],
        "secondary": [
            "사림", "훈구", "사화", "무오사화", "갑자사화", "기묘사화",
            "을사사화", "향약", "서원", "성리학", "조광조",
            "경복궁", "창덕궁", "한양",
        ],
        "exclude": [],
    },
    "JOSEON_LATE": {
        "primary": [
            "임진왜란", "정유재란", "병자호란", "인조반정",
            "영조", "정조", "실학", "정약용", "김정희",
            "세도정치", "흥선대원군", "개화", "강화도조약",
        ],
        "secondary": [
            "이순신", "거북선", "한산도대첩", "명량해전",
            "탕평책", "규장각", "수원화성", "천주교 박해",
            "동학", "갑오개혁", "을미사변",
        ],
        "exclude": [],
    },
    "DAEHAN": {
        "primary": [
            "대한제국", "광무개혁", "고종", "순종",
            "을사조약", "헤이그 특사", "군대 해산",
            "안중근", "의병", "국권피탈", "경술국치",
        ],
        "secondary": [
            "독립협회", "만민공동회", "대한매일신보", "황성신문",
            "신민회", "애국계몽운동", "근대화", "철도", "전기",
            "이토 히로부미", "통감부", "일제강점",
        ],
        "exclude": [],
    },
}


# ============================================================
# 수집 소스 설정 (뉴스가 아닌 전문 자료)
# ============================================================

SOURCE_TYPES = {
    "university": {
        "name": "대학 연구",
        "weight": 2.0,  # 신뢰도 가중치
    },
    "museum": {
        "name": "박물관/문화재청",
        "weight": 2.0,
    },
    "journal": {
        "name": "학술지/논문",
        "weight": 1.8,
    },
    "long_form": {
        "name": "전문 칼럼/분석",
        "weight": 1.5,
    },
    "encyclopedia": {
        "name": "백과사전/위키",
        "weight": 1.0,
    },
}

# 검색 쿼리 템플릿 (Google Custom Search용)
SEARCH_QUERY_TEMPLATES = [
    "{era_name} 역사",
    "{era_name} 연구",
    "{era_name} 유물 발굴",
    "{era_name} 문화재",
    "{keyword} 역사적 의의",
    "{keyword} 연구 논문",
]


# ============================================================
# Google Sheets 시트 구조
# ============================================================

# 시대별 시트 접두사 (시대 키와 조합)
# RAW/CANDIDATES는 시대별로 분리
SHEET_PREFIXES = {
    "RAW": "원문 수집 데이터",
    "CANDIDATES": "점수화된 후보",
    "ARCHIVE": "아카이브",
}

# OPUS 입력은 단일 통합 시트 (시대 무관하게 누적)
HISTORY_OPUS_INPUT_SHEET = "HISTORY_OPUS_INPUT"

# 각 시트의 헤더 정의
SHEET_HEADERS = {
    "RAW": [
        "collected_at",      # 수집 시간 (ISO)
        "era",               # 시대 키
        "source_type",       # university/museum/journal/long_form
        "source_name",       # 출처명
        "title",             # 자료 제목
        "url",               # URL
        "content_summary",   # 내용 요약
        "keywords",          # 감지된 키워드
        "hash",              # 중복 방지용 해시
    ],
    "CANDIDATES": [
        "run_id",            # 실행 날짜 (YYYY-MM-DD)
        "rank",              # 순위
        "era",               # 시대
        "topic",             # 주제 분류
        "score_total",       # 총점
        "score_relevance",   # 관련도
        "score_quality",     # 자료 품질
        "score_freshness",   # 신선도 (발굴/연구 최신성)
        "title",             # 제목
        "url",               # URL
        "summary",           # 요약
        "why_selected",      # 선정 근거
    ],
    # HISTORY_OPUS_INPUT (단일 통합 시트) 헤더
    "OPUS_INPUT": [
        "episode",           # ★ 전체 에피소드 번호 (1, 2, 3, ...)
        "era",               # 시대 키
        "era_episode",       # ★ 시대 내 에피소드 번호 (고조선 1화, 2화, ...)
        "total_episodes",    # ★ 해당 시대 총 에피소드 수 (AI가 결정)
        "era_name",          # 시대 한글명
        "title",             # 에피소드 제목
        "source_url",        # 출처 URL
        "materials_pack",    # 자료 발췌/요약 묶음 (핵심포인트 포함)
        "opus_prompt_pack",  # ★ Opus에 붙여넣을 완제품 (한 셀 복붙)
        "thumbnail_copy",    # 썸네일 문구 추천
        "status",            # PENDING/DONE
        "created_at",        # 생성 시간 (ISO)
    ],
}

# PENDING 유지 개수 (항상 이 개수만큼 PENDING 상태 유지)
PENDING_TARGET_COUNT = 10


# ============================================================
# 시트 제한 설정
# ============================================================

# 시트 행 제한
MAX_ROWS_PER_SHEET = 3000

# 아카이브 트리거 (이 비율 초과 시 아카이브)
ARCHIVE_THRESHOLD_RATIO = 0.9  # 90% = 2700행

# 아카이브 시 유지할 최신 행 수
ROWS_TO_KEEP_AFTER_ARCHIVE = 500


# ============================================================
# 점수화 설정
# ============================================================

# 관련도 점수 가중치
RELEVANCE_WEIGHTS = {
    "primary_keyword_in_title": 5,   # 제목에 주요 키워드
    "primary_keyword_in_content": 2, # 내용에 주요 키워드
    "secondary_keyword": 1,          # 보조 키워드
}

# 자료 품질 점수
QUALITY_WEIGHTS = {
    "university": 10,
    "museum": 10,
    "journal": 8,
    "long_form": 5,
    "encyclopedia": 3,
}

# TOP K 선정 수
DEFAULT_TOP_K = 5


# ============================================================
# LLM 설정
# ============================================================

# LLM 사용 여부 (환경변수로 오버라이드 가능)
LLM_ENABLED_DEFAULT = False

# LLM 호출 최소 점수 (비용 절감)
LLM_MIN_SCORE_DEFAULT = 0

# 기본 모델
LLM_MODEL_DEFAULT = "gpt-4o-mini"


# ============================================================
# 대본 분량 설정 (문자수 기준)
# ============================================================

# 15~20분 분량 = 13,650~18,200자 (한국어 TTS 기준 약 910자/분)
SCRIPT_LEN_MIN = 13650
SCRIPT_LEN_MAX = 18200
SCRIPT_DURATION_MIN = 15  # 분
SCRIPT_DURATION_MAX = 20  # 분


# ============================================================
# 한국사 전용 대본 지시문 템플릿
# ============================================================

SCRIPT_BRIEF_TEMPLATE = """[OPUS SCRIPT BRIEF]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🧠 사고방식 (가장 중요 - 내용보다 우선)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
- 이 프롬프트는 '무엇을 말할지'가 아니라 '어떻게 생각할지'를 지시한다
- 에피소드 번호(n/6 등)는 역할을 의미하지 않는다
  → 역할은 [STRUCTURE ROLE] 필드에서 별도 명시됨
- 아래 자료/사실은 '참고 범위'이지 '정답'이 아니다
  → "이 자료를 중심으로 서술" ❌
  → "이 자료를 활용 가능" ⭕

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📌 분량 (필수)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
- 시간: 15~20분
- 문자수: 13,650~18,200자 (한국어 기준) ← 반드시 준수
- TTS 속도: 약 910자/분

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📌 톤
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
- 차분하고 담담한 다큐멘터리 톤
- 인물 중심 스토리텔링
- 짧은 문장 (1문장 40자 이내)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🚫 금지
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
- 연도/사건 나열식 설명
- 교과서 문체
- 민족주의/국뽕 표현 ("위대한", "찬란한", "자랑스러운", "민족 저항", "외세 침략", "자주 정신")
- 가치 판단 표현 ("~을 의미한다", "역사적 종말", "정체성")
- 중간요약 ("정리하면", "핵심은", "결론적으로", "즉")
- 훈계형 마무리 ("~해야 합니다", "~를 기억합시다")
- 시청자 직접 호칭 ("여러분", "우리 모두", "궁금하지 않은가?")

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⚠️ 강제 규칙: 60% 분기점 (목적 포함)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[0% ~ 60%] 전반부 (약 9,000자)
📎 목적: 정보 이해를 위한 '인식 단계'
✅ 허용: 사실, 맥락, 인과, 개념 설명
❌ 금지: 행동, 감정, 공감 멘트, 생활 장면 묘사
→ 시청자가 '무슨 일이 있었는지' 파악하는 구간

[60% ~ 90%] 후반부 (약 4,500자)
📎 목적: 정보가 인간 선택으로 이어지는 '전개 단계'
✅ 허용: 행동, 느낌, 생활 장면
✅ 스토리텔링 강화, 인물 심리 묘사 가능
❌ 금지: 과장, 미화
→ 시청자가 '그래서 사람들은 어떻게 했는지' 느끼는 구간

[90% ~ 100%] 엔딩 (약 1,500자)
📎 목적: 다음으로 넘어가는 '연결 단계'
✅ 다음 시대로 연결되는 질문으로 끝내기
✅ 다음 영상 예고 한 줄
❌ 금지: 갑자기 훈훈해지거나 착해지는 결론
→ 시청자가 '다음이 궁금해지는' 구간
"""


# ============================================================
# 유틸리티 함수
# ============================================================

def get_era_sheet_name(prefix: str, era: str) -> str:
    """시대별 시트 이름 생성"""
    return f"{era}_{prefix}"


def get_archive_sheet_name(era: str, year: int) -> str:
    """아카이브 시트 이름 생성"""
    return f"{era}_ARCHIVE_{year}"


def get_active_eras() -> List[str]:
    """활성화된 시대 목록 반환"""
    return [era for era in ERA_ORDER if ERAS.get(era, {}).get("active", False)]


def get_era_keywords(era: str) -> Dict[str, List[str]]:
    """시대별 키워드 반환"""
    return ERA_KEYWORDS.get(era, {"primary": [], "secondary": [], "exclude": []})


# ============================================================
# 🚨 시리즈 정합성 규칙 (GLOBAL_SERIES_RULE)
# ============================================================
# 이 규칙은 모든 프롬프트 최상단에 삽입되어
# 에피소드 간 내용 충돌을 방지함

GLOBAL_SERIES_RULE = """
════════════════════════════════════════════════════════════════
🚨 [GLOBAL SERIES RULE] 시리즈 정합성 규칙 (최우선 적용)
════════════════════════════════════════════════════════════════

■ 규칙 1: 역할(ROLE)이 내용 범위를 결정한다
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
- 각 에피소드는 '역할(STRUCTURE ROLE)'에 의해 내용 범위가 결정된다
- STRUCTURE POINTS는 반드시 해당 역할 범위 내에서만 소재를 선택한다
- 역할 범위 밖의 소재가 입력되어도 무시하거나 재해석한다

■ 규칙 2: 화별 소재 재등장 금지
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
- 이전 화에서 다룬 소재는 FACT로도 재등장 금지
- 같은 사건을 다른 관점으로 재해석하는 것도 금지
- 각 화는 '서로 다른 시간대/주제'를 다뤄야 한다

■ 규칙 3: 입력 데이터 vs 규칙 충돌 시 → 규칙 우선
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
- STRUCTURE POINTS에 역할 위반 소재가 포함되어 있으면:
  → 해당 소재를 사용하지 않거나
  → 역할에 맞게 변형하여 사용
- 예: 유산기(5화)에 '건국' 소재가 있으면 → 건국이 아닌 '제도의 지속'으로 재해석

■ 역할별 허용/금지 소재 매트릭스
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
| 역할     | ✅ 허용 소재                      | ❌ 금지 소재                    |
|----------|-----------------------------------|--------------------------------|
| 형성기   | 건국, 위치, 초기 구조, 지배층     | 멸망, 붕괴, 다음 시대 세력      |
| 제도기   | 법, 제도, 통치 방식, 사회 구조    | 건국 신화, 멸망, 전투           |
| 변동기   | 멸망 이후, 이동, 흩어짐           | 건국, 위치, 문화 개요           |
| 유산기   | 제도 지속, 방식 계승, 흔적        | 건국, 전투, 멸망 사건           |
| 연결기   | 공백, 해체, 재활용, 다음 연결     | 전투, 전쟁, 침략, 멸망 서술     |

════════════════════════════════════════════════════════════════
"""


# ============================================================
# 🚨 BODY1_FACTS_ONLY 정의 (해석/평가 금지)
# ============================================================

BODY1_FACTS_ONLY_DEFINITION = """
════════════════════════════════════════════════════════════════
📋 [BODY1_FACTS_ONLY] 사실의 정의 - 이것만 허용
════════════════════════════════════════════════════════════════

■ FACT (사실) = 관찰 가능한 것
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 연도: "BC 108년", "AD 918년"
✅ 존재 여부: "8조법이 존재했다", "왕검성이 있었다"
✅ 구조/형태: "5부로 구성되었다", "위계가 있었다"
✅ 수량/위치: "3개 조항이 전해진다", "요동 지역에 위치했다"
✅ 행위 (관찰 가능): "군대가 포위했다", "사람들이 이동했다"

■ FACT가 아닌 것 (절대 금지)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
❌ 영향: "~에 영향을 미쳤다", "변화를 가져왔다"
❌ 의미: "~을 의미한다", "역사적 종말", "정체성"
❌ 결과 해석: "안정에 기여했다", "기초를 마련했다"
❌ 의도 추측: "~하려 했다", "~을 결심했다", "강화하려 했다"
❌ 가치 판단: "위대하다", "중요하다", "의미 있었다"

■ 변환 예시
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
❌ "8조법 제정은 사회 안정에 기여했다" (평가)
⭕ "8조법 중 3개 조항이 현재까지 전해진다" (관찰)

❌ "왕은 영토 확장을 결심했다" (의도)
⭕ "BC 108년 한나라 군대가 왕검성을 포위했다" (행위)

❌ "저항이 계속 이어졌다" (해석)
⭕ "일부 세력이 남쪽으로 이동했다" (관찰)

❌ "역사적 종말을 맞이했다" (가치 판단)
⭕ "왕검성이 함락되었다" (사건)

════════════════════════════════════════════════════════════════
"""


# ============================================================
# 🚨 최종화(연결기) 전용 규칙
# ============================================================

FINAL_EPISODE_OVERRIDE = """
════════════════════════════════════════════════════════════════
🔒 [FINAL EPISODE OVERRIDE] 최종화 특수 규칙 (강제 적용)
════════════════════════════════════════════════════════════════

⚠️ 이 규칙은 다른 모든 규칙보다 우선함

■ 최종화의 역할: 연결기
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
- 시대를 닫고, 다음 시대로 넘기는 화
- 사건을 설명하지 않음 (이미 앞 화에서 소화됨)
- 의미를 정리하고 방향을 남김

■ STRUCTURE POINTS 자동 필터링
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
입력된 STRUCTURE POINTS에 아래 단어 포함 시 → 해당 항목 무시:
❌ 전투, 전쟁, 침략, 포위, 함락, 멸망, 저항, 항쟁
❌ 군대, 공격, 방어, 점령

■ 최종화에서 허용되는 소재만 사용
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 행정 공백: "중앙 통제가 사라진 후..."
✅ 지배 구조 해체: "기존 위계가 흩어지면서..."
✅ 사람들의 이동: "일부는 남쪽으로, 일부는..."
✅ 제도적 흔적: "그러나 통치 방식은 남았다..."
✅ 통치 감각 재활용: "이후 정치 집단들은 같은 방식을..."
✅ 다음 시대 자연 연결: "완전히 새로 시작된 것이 아니었다..."

■ 문장 형태 강제
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
모든 문장은 '상태 서술' 형태로 작성:
❌ "왕검성이 함락되었다" (사건)
⭕ "왕검성이 사라진 후, 행정 체계는 공백 상태가 되었다" (상태)

❌ "한나라가 침략했다" (사건)
⭕ "외부 세력이 들어온 후, 사람들은 선택을 해야 했다" (상태)

■ 최종화 금지 표현
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
❌ "그래서 우리는 배웠다"
❌ "의미 있었다"
❌ "역사에 남았다"
❌ "잊지 말아야 한다"
❌ "교훈을 준다"

⭕ "다음 시대는 이 위에서 시작되었다"
⭕ "완전한 단절은 아니었다"

════════════════════════════════════════════════════════════════
"""


# ============================================================
# 역할별 금지 키워드 (STRUCTURE POINTS 검증용)
# ============================================================

ROLE_FORBIDDEN_KEYWORDS = {
    "형성기": ["멸망", "붕괴", "함락", "패망", "쇠퇴", "한사군", "낙랑"],
    "제도기": ["건국", "단군", "신화", "멸망", "함락", "전투", "전쟁"],
    "변동기": ["건국", "탄생", "성립", "초기 구조", "위치 설명"],
    "유산기": ["건국", "탄생", "전투", "전쟁", "침략", "함락", "포위"],
    "연결기": ["전투", "전쟁", "침략", "포위", "함락", "멸망", "저항", "항쟁",
               "군대", "공격", "방어", "점령", "패배", "승리"],
}
