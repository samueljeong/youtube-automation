"""
뉴스 파이프라인 설정
"""

from urllib.parse import quote_plus


# ============================================================
# 채널 설정
# ============================================================

CHANNELS = {
    "ECON": {
        "name": "경제",
        "description": "내 돈·내 자산에 영향을 주는 경제 뉴스",
        "active": True,
    },
    "POLICY": {
        "name": "정책",
        "description": "세금·복지·요금 등 생활 정책",
        "active": False,
    },
    "SOCIETY": {
        "name": "사회",
        "description": "고용·의료·교육 등 사회 이슈",
        "active": False,
    },
    "WORLD": {
        "name": "국제",
        "description": "글로벌 경제·금융 동향",
        "active": False,
    },
}

CHANNEL_FILTERS = {
    "ECON": {
        "include": [
            "금리", "기준금리", "환율", "물가", "인플레이션",
            "부동산", "집값", "전세", "월세", "아파트",
            "연금", "노후", "은퇴", "퇴직금",
            "주식", "채권", "증시", "코스피", "코스닥",
            "대출", "예금", "적금", "이자",
        ],
        "exclude": ["정치 공방", "여야 대립", "탄핵"],
        "weight": 2.0,
    },
    "POLICY": {
        "include": [
            "세금", "연금", "건강보험", "보험료", "복지",
            "전기요금", "가스요금", "지원금", "보조금",
        ],
        "exclude": [],
        "weight": 1.5,
    },
    "SOCIETY": {
        "include": [
            "고용", "실업", "임금", "의료", "교육",
            "사기", "전세사기",
        ],
        "exclude": [],
        "weight": 1.5,
    },
    "WORLD": {
        "include": [
            "미국", "연준", "중국", "일본", "유럽",
            "달러", "유가", "수출",
        ],
        "exclude": ["전쟁", "분쟁"],
        "weight": 1.0,
    },
}


# ============================================================
# 요일별 앵글
# ============================================================

WEEKDAY_ANGLES = {
    0: "월요일: 지난주 흐름 + 이번 주 예고",
    1: "화요일: 이슈 정리",
    2: "수요일: 이슈 정리",
    3: "목요일: 이슈 정리",
    4: "금요일: 이슈 정리 + 주간 마무리",
    5: "토요일: 주간 복기 / 해설형",
    6: "일요일: 큰 흐름 + 다음 주 예고",
}


# ============================================================
# RSS 피드 설정
# ============================================================

def google_news_rss_url(query: str) -> str:
    """Google News RSS 검색 URL 생성 (한국어)"""
    q = quote_plus(query)
    return f"https://news.google.com/rss/search?q={q}&hl=ko&gl=KR&ceid=KR:ko"


NEWS_FEEDS = [
    ("economy_daily", "기준금리 OR 대출 OR 예금 OR 물가 OR 환율 OR 부동산"),
    ("policy_life", "세금 OR 연금 OR 건강보험료 OR 전기요금 OR 가스요금 OR 복지"),
    ("society_life", "고용 OR 실업 OR 집값 OR 전세 OR 의료 OR 교육비"),
    ("global_macro", "미국 금리 OR 달러 OR 유가 OR 반도체 수출 OR 중국 경기"),
]


# ============================================================
# 카테고리 키워드 (규칙 기반 분류)
# ============================================================

CATEGORY_KEYWORDS = {
    "경제": ["금리", "대출", "예금", "물가", "환율", "부동산", "전세", "주식", "채권", "달러", "유가", "수출", "경기"],
    "정책": ["세금", "연금", "건강보험", "보험료", "복지", "규제", "지원금", "보조금", "요금", "전기요금", "가스요금"],
    "사회": ["고용", "실업", "임금", "의료", "교육", "사기", "전세사기", "물가", "집값"],
    "국제": ["미국", "연준", "중국", "일본", "유럽", "전쟁", "유가", "달러", "환율", "수출"],
}
